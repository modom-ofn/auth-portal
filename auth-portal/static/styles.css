/* ========== Root palette ========== */
:root{
  --bg:#0b1020;          /* deep navy */
  --bg2:#0f172a;         /* slate */
  --card:#111827;        /* card surface */
  --muted:#94a3b8;       /* muted text */
  --border:#1f2937;      /* borders */
  --text:#e5e7eb;        /* foreground */
  --brand:#f59e0b;       /* Plex orange accent */
  --ok:#86efac;          /* success */
  --warn:#fbbf24;        /* warning */
  /* Optional hero artwork (place a file at /static/bg.jpg to enable) */
  --hero-url: url("/static/bg.jpg"); /* or set to 'none' to disable */
}

/* Reset / Base */
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
body.modal-open{overflow:hidden;}

/* ========== Overseerr-like background ========== */
/* Layered gradients for rich depth */
.bg{
  position: relative;
  min-height: 100vh;
  background:
    radial-gradient(70% 60% at 10% 10%, #1e293b 0%, transparent 60%),
    radial-gradient(70% 60% at 90% 20%, #0b1220 0%, transparent 55%),
    linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);
  overflow-x: hidden;
  overflow-y: auto;
}

/* Optional blurred hero art glow â€” supply /static/bg.jpg for a subtle, soft-focus vibe */
.bg::before{
  content:"";
  position:absolute; inset:-10% -10% -10% -10%;
  background-image: var(--hero-url);
  background-position:center 20%;
  background-repeat:no-repeat;
  background-size:cover;
  filter: blur(38px) saturate(1.05) brightness(.7);
  opacity:.18;                /* keep it subtle */
  transform: scale(1.15);
  pointer-events:none;
}

/* Animated film grain (very subtle) */
.bg::after{
  content:"";
  position:absolute; inset:0;
  background-image: repeating-radial-gradient(rgba(255,255,255,.012) 0 1px, transparent 2px 4px);
  opacity:.25;
  mix-blend-mode: soft-light;
  animation: grain 12s steps(10) infinite;
  pointer-events:none;
}
@keyframes grain{
  0%{transform:translate(0,0)}
  10%{transform:translate(-1%,1%)}
  20%{transform:translate(1%,-1%)}
  30%{transform:translate(-1%,0)}
  40%{transform:translate(1%,1%)}
  50%{transform:translate(0,-1%)}
  60%{transform:translate(-1%,1%)}
  70%{transform:translate(1%,0)}
  80%{transform:translate(-1%,-1%)}
  90%{transform:translate(1%,-1%)}
  100%{transform:translate(0,0)}
}

/* ========== Layout ========== */
.center{min-height:100%;display:grid;place-items:center;padding:2rem;position:relative;z-index:1}

.card{
  width:100%;max-width:520px;
  background:linear-gradient(180deg, rgba(17,24,39,.9), rgba(17,24,39,.92));
  border:1px solid var(--border);
  padding:2rem;border-radius:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.35), 0 0 0 1px rgba(255,255,255,.02) inset;
  backdrop-filter: blur(6px);
  animation: fadeIn .8s ease-out both;
}

.brand{display:flex;flex-direction:column;align-items:center;gap:.5rem;margin-bottom:1.25rem}
.logo{width:42px;height:42px;border-radius:8px}
h1{font-size:1.6rem;margin:0}
.muted{color:var(--muted)}
.footnote{margin-top:1rem;color:var(--muted);font-size:.9rem}

/* ========== Buttons ========== */
.auth-btn {
  font-size: 18px;
  font-weight: 700;
  padding: 14px 22px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  border: 1px solid transparent;
  cursor: pointer;
  line-height: 1;
  transition:
    transform .18s ease,
    box-shadow .18s ease,
    background-color .18s ease,
    border-color .18s ease;
}
.auth-btn:hover:not(:disabled) {
  transform: translateY(-2px);
}
.auth-btn:active:not(:disabled) {
  transform: translateY(0);
}
.auth-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}
.auth-btn:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.65);
  outline-offset: 2px;
}

/* Overseerr-style Plex CTA in Plex Orange */
.plex-btn {
  background: #e5a00d; /* Plex orange */
  border: 1px solid #d48f0b;
  color: #000000; /* black text + icon */
  font-size: 18px;
  font-weight: 700;
  padding: 14px 22px;
  border-radius: 12px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  box-shadow: 0 6px 20px rgba(229, 160, 13, 0.25);
  transition:
    transform .18s ease,
    box-shadow .18s ease,
    background-color .18s ease,
    border-color .18s ease;
}

.plex-btn:hover {
  background: #f59e0b; /* brighter Plex orange */
  border-color: #cc7a00;
  box-shadow: 0 12px 36px rgba(229, 160, 13, 0.35);
  transform: translateY(-2px);
}

.plex-btn:active {
  transform: translateY(0);
  background: #d48f0b;
  border-color: #a86400;
}

/* ---------- Icon sizing inside the button (applies to Emby/Jellyfin <img>, inline <svg>, and Plex mask) */
.plex-btn img,
.plex-btn svg,
.plex-btn .plex-logo-mask{
  width:22px;
  height:22px;
  max-width:22px;
  max-height:22px;
  flex:0 0 22px;
  display:inline-block;
  object-fit:contain;
  vertical-align:middle;
}
.auth-btn img,
.auth-btn svg,
.auth-btn .plex-logo-mask{
  width:22px;
  height:22px;
  max-width:22px;
  max-height:22px;
  flex:0 0 22px;
  display:inline-block;
  object-fit:contain;
  vertical-align:middle;
}

/* Inline SVG logo â†’ force black (Plex mask already black via background) */
.plex-btn .plex-logo,
.plex-btn .plex-logo *{
  fill:#000 !important;
  stroke:#000 !important;
}

/* If you happen to use an <img> for the Plex logo, make it black via filter */
.plex-btn img.plex-logo{
  filter:brightness(0) saturate(100%) !important;
}

/* Monochrome Plex icon, painted by background-color (always black) */
.plex-btn .plex-logo-mask{
  background-color:#000;                 /* <- icon color */
  -webkit-mask-image:url('/static/plex.svg');
  -webkit-mask-repeat:no-repeat;
  -webkit-mask-position:center;
  -webkit-mask-size:contain;
  mask-image:url('/static/plex.svg');
  mask-repeat:no-repeat;
  mask-position:center;
  mask-size:contain;
}

/* badges for portal auth state */
.btn.badge{
  cursor: default;
  font-weight: 700;
  border-radius: 12px;
  padding: .6rem 1rem;
  letter-spacing:.2px;
}
.btn.badge.success{
  background:#0f3d25;
  border:1px solid #1f7a4a;
  color:#b8f3d3;
}
.btn.badge.danger{
  background:#3d0f16;
  border:1px solid #7a1f2f;
  color:#f3b8c2;
}

.badge{
  display:inline-block;padding:.35rem .55rem;border-radius:999px;
  font-weight:700;font-size:.85rem;border:1px solid transparent
}
.badge.ok{background:#052e1a;border-color:#0a5a35;color:#b2f5cf}
.badge.warn{background:#2c1605;border-color:#8a4b16;color:#ffd8b3}

/* (Optional/unused) Jellyfin button skeleton â€” keep sizes consistent if you ever switch classes */
.jellyfin-btn{
  background:#7a45ff;
  border:1px solid #5933c2;
  color:#fff;
  font-size:18px;
  font-weight:700;
  padding:14px 22px;
  border-radius:12px;
  display:inline-flex;
  align-items:center;
  gap:12px;
}

/* ========== Footer ========== */
.footer{
  position:fixed;left:0;right:0;bottom:0;
  display:flex;justify-content:center;align-items:center;
  padding:14px 10px;font-size:14px;color:#8b8f99;z-index:1;
  background: linear-gradient(to top, rgba(11,16,32,.55), rgba(11,16,32,0));
  backdrop-filter: blur(2px);
}
.footer a{
  color:var(--brand);
  text-decoration:none;font-weight:700;
}
.footer a:hover{text-decoration:underline}

/* ========== Small niceties ========== */
a{color:var(--text)}
a:hover{opacity:.9}
@keyframes fadeIn{from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:translateY(0)}}

/* ========== Admin Console ========== */
.admin-page{background:var(--bg2);color:var(--text);min-height:100vh;margin:0;}
.admin-header{display:flex;justify-content:space-between;align-items:center;padding:1.5rem 2rem;background:var(--card);border-bottom:1px solid var(--border);}
.admin-header h1{margin:0;font-size:1.4rem;}
.admin-header .muted{margin:.25rem 0 0;}
.admin-home-link{color:var(--text);border:1px solid var(--border);padding:.55rem 1.1rem;border-radius:10px;text-decoration:none;transition:background .2s ease,border-color .2s ease;}
.admin-home-link:hover{background:rgba(148,163,184,.12);border-color:rgba(148,163,184,.35);}
.highlight{color:var(--brand);font-weight:600;}
.status-banner{margin:1rem 2rem 0;padding:.75rem 1rem;border-radius:10px;display:none;line-height:1.4;}
.status-banner.show{display:block;}
.status-banner.info{background:rgba(59,130,246,.18);border:1px solid rgba(59,130,246,.55);color:#dbeafe;}
.status-banner.success{background:rgba(34,197,94,.18);border:1px solid rgba(34,197,94,.55);color:#dcfce7;}
.status-banner.error{background:rgba(248,113,113,.18);border:1px solid rgba(248,113,113,.55);color:#ffe4e6;}
.admin-main{display:flex;min-height:calc(100vh - 140px);}
.admin-nav{width:220px;background:var(--card);display:flex;flex-direction:column;border-right:1px solid var(--border);padding:1.25rem;gap:.75rem;}
.admin-tab{background:transparent;border:1px solid var(--border);color:var(--text);padding:.75rem 1rem;border-radius:10px;cursor:pointer;text-align:left;transition:background .2s ease,border-color .2s ease;}
.admin-tab:hover{background:rgba(148,163,184,.12);}
.admin-tab.active{background:rgba(245,158,11,.16);border-color:var(--brand);}
.admin-content{flex:1;padding:2rem;overflow:auto;}
.admin-panels{display:grid;gap:1.5rem;grid-template-columns:minmax(0,1fr) 320px;align-items:start;}
.panel{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:1.5rem;box-shadow:0 8px 28px rgba(0,0,0,.28);}
.panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem;}
.panel-header-actions{display:flex;align-items:center;gap:.75rem;}
.panel-helper{color:var(--muted);margin:0 0 1rem;font-size:.9rem;}
.version-badge{font-size:.85rem;color:var(--muted);}
.icon-btn{background:rgba(148,163,184,.14);border:1px solid rgba(148,163,184,.35);color:var(--text);width:34px;height:34px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-weight:700;cursor:pointer;transition:background .2s ease,transform .2s ease,opacity .2s ease;}
.icon-btn:hover:not(:disabled){background:rgba(245,158,11,.2);transform:translateY(-1px);}
.icon-btn:disabled{opacity:.5;cursor:not-allowed;}
#config-editor{width:100%;min-height:260px;background:#0b1220;border:1px solid var(--border);color:var(--text);border-radius:12px;padding:1rem;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;font-size:.95rem;resize:vertical;}
.admin-actions{display:flex;align-items:center;gap:1rem;margin-top:1rem;}
.admin-actions input{flex:1;background:#0b1220;border:1px solid var(--border);border-radius:10px;padding:.6rem .85rem;color:var(--text);}
.admin-actions button{padding:.7rem 1.4rem;border-radius:10px;border:1px solid var(--brand);background:var(--brand);color:#1d1200;font-weight:600;cursor:pointer;transition:opacity .2s ease,transform .2s ease;}
.admin-actions button:disabled{opacity:.55;cursor:not-allowed;transform:none;}
.admin-actions button:hover:not(:disabled){transform:translateY(-1px);}

/* Roles & permissions */
.roles-section{margin-top:2rem;display:flex;flex-direction:column;gap:1rem;}
.roles-top{display:flex;align-items:flex-start;justify-content:space-between;gap:1rem;flex-wrap:wrap;}
.roles-grid{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(320px,.9fr);gap:1rem;}
.glass-card{background:linear-gradient(160deg, rgba(17,24,39,.9), rgba(17,24,39,.82));border:1px solid var(--border);border-radius:12px;padding:1rem;box-shadow:0 12px 30px rgba(0,0,0,.25);}
.roles-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:.75rem;}
.role-card{border:1px solid var(--border);border-radius:10px;padding:.85rem;background:linear-gradient(180deg, rgba(24,32,48,.9), rgba(17,24,39,.9));}
.role-card-header{display:flex;justify-content:space-between;align-items:flex-start;gap:.5rem;margin-bottom:.35rem;}
.role-card-title{font-weight:700;letter-spacing:.2px;}
.role-card-perms{display:flex;flex-wrap:wrap;gap:.35rem;margin-top:.35rem;}
.roles-actions{display:flex;gap:.5rem;align-items:center;}
.role-form-card{display:flex;flex-direction:column;gap:.75rem;}
.role-form .form-row.inline{display:flex;flex-direction:column;}
.role-form .form-row label{margin-bottom:.25rem;color:var(--muted);}
.role-form .form-row input,.role-form .form-row textarea{width:100%;}
.tight{margin:0;}
.roles-wrap{display:flex;flex-wrap:wrap;gap:.35rem;align-items:center;}
.role-checkbox-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:.75rem;margin-top:.5rem;}
.role-checkbox-card{border:1px solid var(--border);border-radius:10px;padding:.85rem;background:linear-gradient(180deg, rgba(16,25,40,.95), rgba(15,23,42,.9));box-shadow:0 8px 24px rgba(0,0,0,.18);}
.role-checkbox-header{display:flex;align-items:center;justify-content:space-between;gap:.5rem;margin-bottom:.35rem;}
.role-checkbox-toggle{display:flex;align-items:center;gap:.5rem;font-weight:700;cursor:pointer;}
.role-checkbox-toggle input{width:18px;height:18px;}
.role-checkbox-perms{display:flex;flex-wrap:wrap;gap:.35rem;margin-top:.35rem;}
.role-card-actions{display:flex;justify-content:flex-end;gap:.5rem;margin-top:.5rem;}
.config-tools{display:flex;gap:.75rem;margin-bottom:1rem;flex-wrap:wrap;}
.config-tools .ghost-btn{min-width:110px;}
.config-tools input[type="file"]{display:none;}
.history-panel{max-height:100%;overflow:auto;}
.history-list{list-style:none;margin:0;padding:1rem;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;font-size:.85rem;background:#0b1220;border:1px solid var(--border);border-radius:12px;max-height:340px;overflow:auto;}
.history-list li+li{margin-top:.75rem;padding-top:.75rem;border-top:1px solid #1e293b;}
.secret-banner{display:none;padding:.75rem 1rem;margin:0 0 1rem;border-radius:10px;border:1px dashed rgba(59,130,246,.65);background:rgba(59,130,246,.18);color:#dbeafe;font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;word-break:break-all;}
.secret-banner.show{display:block;}
.ghost-btn{background:transparent;border:1px solid var(--border);color:var(--text);padding:.5rem .9rem;border-radius:10px;cursor:pointer;font-weight:500;transition:background .2s ease,border-color .2s ease,opacity .2s ease;}
.ghost-btn:hover:not(:disabled){background:rgba(148,163,184,.12);border-color:rgba(148,163,184,.35);}
.ghost-btn:disabled{opacity:.55;cursor:not-allowed;}
.danger-btn{background:rgba(248,113,113,.2);border:1px solid rgba(248,113,113,.55);color:#ffe4e6;padding:.5rem .9rem;border-radius:10px;cursor:pointer;transition:background .2s ease,opacity .2s ease;}
.danger-btn:hover:not(:disabled){background:rgba(248,113,113,.28);}
.danger-btn:disabled{opacity:.55;cursor:not-allowed;}
.oauth-table-wrapper{width:100%;overflow-x:auto;margin-bottom:1.5rem;}
.oauth-table{width:100%;border-collapse:collapse;min-width:620px;table-layout:fixed;}
.oauth-table th,.oauth-table td{padding:.6rem .75rem;border-bottom:1px solid var(--border);text-align:left;vertical-align:top;word-break:break-word;white-space:normal;}
.oauth-table th{font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;color:var(--muted);}
.oauth-table th.actions-col,.oauth-table td.actions-cell{text-align:right;}
.oauth-table tbody tr:hover{background:rgba(148,163,184,.08);}
.actions-cell{display:flex;justify-content:flex-end;gap:.5rem;flex-wrap:wrap;}
.mono{font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;word-break:break-all;}
.oauth-form{display:flex;flex-direction:column;gap:1rem;margin-top:1.5rem;}
.oauth-form .form-row{display:flex;flex-direction:column;gap:.4rem;}
.oauth-form label{font-weight:600;font-size:.95rem;}
.oauth-form input,.oauth-form textarea{background:#0b1220;border:1px solid var(--border);border-radius:10px;color:var(--text);padding:.65rem .85rem;font-family:inherit;font-size:.95rem;resize:vertical;}
.field-hint{color:var(--muted);font-size:.8rem;}
.oauth-form-actions{display:flex;align-items:center;gap:.75rem;}
.oauth-form-actions .ghost-btn{border-color:rgba(148,163,184,.35);}
.backup-header-actions{display:flex;gap:.75rem;flex-wrap:wrap;justify-content:flex-end;}
.backup-schedule{display:flex;flex-direction:column;gap:1.2rem;margin:1.25rem 0;}
.backup-toggle{display:flex;align-items:center;justify-content:space-between;gap:1rem;flex-wrap:wrap;}
.backup-toggle label{display:flex;align-items:center;gap:.5rem;font-weight:600;}
.backup-toggle .muted{font-size:.85rem;}
.backup-schedule-grid{display:grid;gap:1rem;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));}
.backup-schedule-row{display:flex;flex-direction:column;gap:.4rem;}
.backup-schedule-row input,
.backup-schedule-row select{background:#0b1220;border:1px solid var(--border);border-radius:10px;color:var(--text);padding:.6rem .85rem;}
.backup-sections{border:1px dashed rgba(148,163,184,.35);border-radius:12px;padding:1rem;display:flex;flex-wrap:wrap;gap:1rem;margin:0;}
.backup-sections legend{padding:0 .5rem;font-weight:600;}
.backup-sections label{display:flex;align-items:center;gap:.5rem;}
.backup-schedule-actions{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;margin-top:.5rem;}
.backup-run-meta{display:flex;gap:1.5rem;color:var(--muted);font-size:.85rem;}
.backup-table-wrapper{width:100%;overflow-x:auto;margin-top:1rem;}
.backup-table{width:100%;border-collapse:collapse;min-width:540px;}
.backup-table th,.backup-table td{padding:.6rem .75rem;border-bottom:1px solid var(--border);text-align:left;}
.backup-table th{font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;color:var(--muted);}
.backup-actions{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:flex-end;}
#backup-empty{margin:1rem 0;color:var(--muted);}
.users-header-actions{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap;}
#users-search{background:#0b1220;border:1px solid var(--border);border-radius:10px;color:var(--text);padding:.55rem .8rem;min-width:220px;}
.user-summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:.85rem;margin:1rem 0;}
.user-stat{background:rgba(148,163,184,.08);border:1px solid var(--border);border-radius:12px;padding:.85rem 1rem;}
.user-stat .stat-label{display:block;color:var(--muted);font-size:.85rem;}
.user-stat .stat-value{display:block;font-size:1.4rem;font-weight:700;}
.user-filters{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;margin:1rem 0;}
.users-table-wrapper{width:100%;overflow-x:auto;margin-top:1rem;}
.users-table{width:100%;border-collapse:collapse;min-width:760px;table-layout:fixed;}
.users-table th,.users-table td{padding:.65rem .75rem;border-bottom:1px solid var(--border);text-align:left;vertical-align:top;}
.users-table th{font-size:.8rem;text-transform:uppercase;letter-spacing:.05em;color:var(--muted);}
.users-table th .sort-btn{display:inline-flex;align-items:center;gap:.35rem;background:none;border:none;color:inherit;font:inherit;font-weight:700;padding:0;cursor:pointer;}
.sort-btn .sort-arrow{font-size:.85rem;color:var(--muted);}
.sort-btn[data-sort-active="true"]{color:var(--text);}
.sort-btn[data-sort-active="true"] .sort-arrow{color:var(--brand);}
.sort-btn:focus-visible{outline:2px solid var(--brand);outline-offset:3px;border-radius:6px;}
.user-cell .user-name-btn{display:block;font-size:1rem;}
.user-name-btn{background:none;border:none;padding:0;margin:0;color:var(--brand);font:inherit;font-weight:700;cursor:pointer;text-align:left;}
.user-name-btn:hover,.user-name-btn:focus-visible{color:#fcd34d;}
.user-name-btn:focus-visible{outline:2px solid var(--brand);outline-offset:2px;}
.user-cell .muted{display:block;}
.user-meta-cell .muted{margin-top:.25rem;line-height:1.3;}
.user-providers{display:flex;flex-direction:column;gap:.35rem;}
.pill{display:inline-flex;align-items:center;gap:.35rem;padding:.25rem .6rem;border-radius:999px;border:1px solid var(--border);font-size:.8rem;font-weight:700;background:rgba(148,163,184,.1);max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}
.pill.success{border-color:rgba(34,197,94,.5);color:#bbf7d0;background:rgba(34,197,94,.14);}
.pill.warn{border-color:rgba(248,113,113,.55);color:#fecdd3;background:rgba(248,113,113,.14);}
.pill.info{border-color:rgba(59,130,246,.55);color:#bfdbfe;background:rgba(59,130,246,.16);}
.pill.muted{color:var(--muted);background:rgba(148,163,184,.08);}
.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100%;display:inline-block;}
.user-media-id{display:block;margin-top:.15rem;}
.users-actions{display:flex;justify-content:flex-end;align-items:center;}
.user-info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:.6rem 1rem;}
.user-info-row{border:1px solid var(--border);border-radius:12px;padding:.75rem 1rem;background:rgba(148,163,184,.08);box-shadow:0 6px 18px rgba(0,0,0,.28);line-height:1.4;}
.user-info-label{font-size:.82rem;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;margin-bottom:.25rem;}
.user-info-value{font-weight:700;word-break:break-word;color:var(--text);}
.modal{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;padding:2rem;z-index:2000;background:transparent;border:none;}
.modal[hidden]{display:none;}
.modal::backdrop{background:transparent;}
.modal-backdrop{position:absolute;inset:0;background:rgba(15,23,42,.8);}
.modal-dialog{position:relative;background:var(--card);border:1px solid var(--border);border-radius:18px;max-width:720px;width:100%;padding:2.5rem 2.25rem 2.25rem;box-shadow:0 28px 52px rgba(0,0,0,.55);}
.modal h3{margin-top:0;color:var(--brand);}
.modal-dialog:focus{outline:none;}
.modal-body{max-height:60vh;overflow:auto;line-height:1.5;color:var(--text);padding-right:.4rem;}
.modal-body::-webkit-scrollbar{width:10px;}
.modal-body::-webkit-scrollbar-track{background:rgba(148,163,184,.12);border-radius:12px;}
.modal-body::-webkit-scrollbar-thumb{background:rgba(148,163,184,.4);border-radius:12px;}
.modal-body::-webkit-scrollbar-thumb:hover{background:rgba(148,163,184,.6);}
.modal-body p{margin:0 0 1rem;}
.modal-body ul{margin:0 0 1rem 1.25rem;padding:0;}
.modal-body li{margin:.35rem 0;}
.modal-body pre{background:#0b1220;border:1px solid var(--border);border-radius:12px;padding:1rem;overflow:auto;font-size:.9rem;}
.modal-body code{font-family:"SFMono-Regular",Consolas,"Liberation Mono",Menlo,monospace;}
.close-btn{position:absolute;top:1rem;right:1rem;color:var(--text);}
.admin-footer{padding:1rem 2rem;border-top:1px solid var(--border);background:var(--card);color:var(--muted);text-align:center;}

.consent-card{max-width:520px;}
.consent-section{margin:1.5rem 0;}
.consent-section h2{margin:0 0 .75rem;font-size:1.1rem;}
.scope-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:.75rem;}
.scope-list li{background:rgba(148,163,184,.12);border:1px solid rgba(148,163,184,.16);padding:.85rem 1rem;border-radius:12px;display:flex;flex-direction:column;gap:.35rem;}
.scope-list strong{font-size:1rem;}
.scope-list span{color:var(--muted);font-size:.88rem;}
.consent-note{margin-bottom:1.25rem;padding:1rem;border-radius:12px;background:rgba(245,158,11,.14);border:1px solid rgba(245,158,11,.28);color:#fed7aa;font-size:.9rem;}
.consent-form{display:flex;flex-direction:column;gap:1rem;}
.consent-actions{display:flex;justify-content:space-between;gap:1rem;}
.primary-btn{background:var(--brand);border:1px solid var(--brand);color:#1d1200;padding:.65rem 1.2rem;border-radius:10px;font-weight:600;cursor:pointer;transition:transform .2s ease,opacity .2s ease;}
.primary-btn:hover:not(:disabled){transform:translateY(-1px);}
.primary-btn:disabled{opacity:.55;cursor:not-allowed;transform:none;}

@media (max-width:960px){
  .admin-main{flex-direction:column;}
  .admin-nav{flex-direction:row;width:auto;border-right:none;border-bottom:1px solid var(--border);padding:1rem;gap:.5rem;}
  .admin-tab{flex:1;text-align:center;}
  .admin-panels{grid-template-columns:1fr;}
  .history-panel{max-height:none;}
  .actions-cell{justify-content:flex-start;}
}
